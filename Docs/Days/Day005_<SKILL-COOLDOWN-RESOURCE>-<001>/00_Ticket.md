[Task ID]

SKILL-COOLDOWN-RESOURCE-001

[Title]

스킬 쿨타임 및 자원(Stamina) 검증을 서버 기준으로 일관되게 처리한다

[Background]

현재 스킬은
- 입력 의도 생성
- 서버 Authority 승인
- 실행

까지는 구조가 잡혀 있음.
하지만 쿨타임 / 스태미나 같은 “사용 가능 여부” 검증 로직이 분산되기 쉬운 상태야.

실무에서는 이게:
- 클라에서만 막힘
- 서버/클라 기준 불일치
- 예측과 실제 결과 불일치

로 이어지기 딱 좋은 구간임.

[Requirements]
- 스킬 사용 가능 여부를 판단하는 단일 진입점을 만든다
    - 쿨타임
    - 자원(Stamina)
- 최종 판정은 서버 Authority 기준
- 클라이언트는 예측 가능하되, 서버 결과로 보정 가능해야 한다
- 실패 케이스 최소 1개 포함
    - 예: 스태미나 부족 상태에서 스킬 입력 연타

[Constraints]
- UE 5.4
- Listen Server 기준 (Dedicated 고려는 구조만)
- Tick 기반 쿨타임 감소 ❌
    → 시간 기준 계산 권장
- 스킬 로직에 자원 관리 코드 직접 박아 넣지 말 것
    - 책임 분리 필수
- 이후 버프/디버프/쿨타임 감소 효과로 확장 가능해야 함

[Definition of Done]
- 스킬 사용 가능/불가 판단 흐름을 로그로 추적 가능
- 클라에서 “눌렀는데 안 나간 이유”가 설명됨
- 서버/클라 결과 불일치 상황을 의도적으로 만들어도 구조적으로 설명 가능
- 다음 티켓에서
    → 버프 기반 쿨타임 변경
    → 자원 타입 추가(Mana 등)
    로 확장 가능하다고 스스로 설명할 수 있음